FROM ubuntu:18.04

RUN sed -i.org -e 's|ports.ubuntu.com|jp.archive.ubuntu.com|g' /etc/apt/sources.list

RUN set -x \
  && apt update \
  && apt upgrade -y --no-install-recommends \
  && apt install -y pkg-config

RUN apt install -y bash python3-pip libhdf5-serial-dev hdf5-tools zlib1g-dev zip libjpeg8-dev libhdf5-dev
RUN pip3 install --upgrade pip
RUN pip3 install --upgrade setuptools
RUN pip3 install --upgrade numpy
RUN pip3 install -U grpcio 
RUN pip3 install -U absl-py 
RUN pip3 install -U py-cpuinfo 
RUN pip3 install -U psutil 
RUN pip3 install -U portpicker 
RUN pip3 install -U six 
RUN pip3 install -U mock 
RUN pip3 install -U requests 
RUN pip3 install -U gast 
#RUN pip3 install -U h5py 
RUN pip3 install -U astor 
RUN pip3 install -U termcolor
#RUN pip3 install --pre --extra-index-url https://developer.download.nvidia.com/compute/redist/jp/v42 
RUN pip3 install --pre --extra-index-url tensorflow-cpu

COPY files/cuda-10-0.conf /etc/ld.so.conf.d/
COPY files/nvidia-tegra.conf /etc/ld.so.conf.d/

CMD ["/bin/bash"]
