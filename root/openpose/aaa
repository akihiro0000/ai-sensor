FROM ubuntu:18.04

ENV PYTHON_VERSION=3.6.6
ENV DEBIAN_FRONTEND nonineractive
ENV DEBIAN_FRONTEND noninteractive

WORKDIR /root/
RUN apt update && apt upgrade -y \
    apt-utils \
    python3 \
    python3-pip \
    python3-dev \
    python3 -V \
    git \
    wget \
    vim \
    libopencv-highgui-dev \
    v4l-utils \
 && apt clean \
 && apt install -y  --no-install-recommends make cmake gcc g++ unzip wget build-essential zlib1g-dev libffi-dev libssl-dev \
 && rm -rf /var/lib/apt/list/* \
 && mkdir /root/work
# && wget https://www.python.org/ftp/python/${PYTHON_VERSION}/Python-${PYTHON_VERSION}.tgz \
# && tar zxf Python-${PYTHON_VERSION}.tgz \
# && rm -rf Python-3.6.8.tgz

RUN apt-get -q -y install swig
RUN git clone https://www.github.com/ildoonet/tf-openpose
WORKDIR /root/tf-openpose


RUN pip3 install --upgrade pip
RUN pip3 install --upgrade setuptools
RUN pip3 install argparse
RUN pip3 install dill
RUN pip3 install fire
RUN python3 -m pip install matplotlib
RUN apt-get install build-essential
RUN apt-get -y install llvm
RUN pip3 install cython
RUN apt-get install -y python3-llvmlite
RUN apt-get install -y python3-numba
#RUN pip3 install psutil
#RUN pip3 install pycocotools
#RUN pip3 install requests
#RUN pip3 install scipy
#RUN pip3 install slidingwindow
#RUN pip3 install tqdm
#RUN pip3 install git+https://github.com/ppwwyyxx/tensorpack.git

#WORKDIR /root/tf-openpose/models/graph/cmu/
#RUN bash ./download.sh

#WORKDIR /root/tf-openpose/tf_pose/pafprocess/
#RUN swig -python -c++ pafprocess.i && python3 setup.py build_ext --inplace


#RUN pip3 install opencv-python
#RUN apt-get install -y libsm6
#RUN apt-get install -y libxrender1
#RUN python3 -m pip install --upgrade pip
RUN alias python='/usr/bin/python3'
RUN python3 -m pip install tensorflow
